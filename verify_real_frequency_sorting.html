<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>真实字频排序验证</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 25px 70px rgba(0, 0, 0, 0.4);
        }
        
        h1 {
            text-align: center;
            color: #2d3748;
            margin-bottom: 30px;
            font-size: 2.8rem;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 10px rgba(30, 60, 114, 0.2);
        }
        
        .subtitle {
            text-align: center;
            color: #4a5568;
            margin-bottom: 40px;
            font-size: 1.2rem;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.6;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .stat-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border-top: 5px solid #1e3c72;
            transition: all 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.15);
        }
        
        .stat-icon {
            font-size: 2.5rem;
            color: #1e3c72;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .stat-title {
            font-size: 1.1rem;
            color: #4a5568;
            margin-bottom: 10px;
            text-align: center;
            font-weight: 600;
        }
        
        .stat-value {
            font-size: 2.2rem;
            color: #1e3c72;
            text-align: center;
            font-weight: bold;
        }
        
        .stat-desc {
            font-size: 0.9rem;
            color: #718096;
            text-align: center;
            margin-top: 10px;
        }
        
        .chapter-controls {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 12px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 1200px) {
            .chapter-controls {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .chapter-controls {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        .chapter-btn {
            padding: 15px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(30, 60, 114, 0.4);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .chapter-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(30, 60, 114, 0.6);
        }
        
        .chapter-btn.active {
            background: linear-gradient(135deg, #152a57 0%, #1e3c72 100%);
            box-shadow: 0 4px 15px rgba(21, 42, 87, 0.6);
        }
        
        .chapter-number {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .chapter-range {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .characters-section {
            margin-top: 40px;
        }
        
        .section-title {
            font-size: 1.8rem;
            color: #2d3748;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #1e3c72;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-title i {
            color: #1e3c72;
        }
        
        .characters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .character-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }
        
        .character-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
            border-color: #1e3c72;
        }
        
        .character-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        }
        
        .character-char {
            font-size: 3rem;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 10px;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .character-pinyin {
            font-size: 1.1rem;
            color: #1e3c72;
            margin-bottom: 8px;
            font-weight: 500;
            background: #f7fafc;
            padding: 4px 10px;
            border-radius: 20px;
            display: inline-block;
        }
        
        .character-rank {
            font-size: 1rem;
            color: #4a5568;
            background: #edf2f7;
            padding: 6px 12px;
            border-radius: 20px;
            display: inline-block;
            font-weight: 600;
        }
        
        .character-frequency {
            font-size: 0.85rem;
            color: #718096;
            margin-top: 8px;
            font-style: italic;
        }
        
        .character-examples {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e2e8f0;
        }
        
        .examples-title {
            font-size: 0.9rem;
            color: #4a5568;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .examples-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .example-word {
            background: #f7fafc;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.85rem;
            color: #1e3c72;
            border: 1px solid #e2e8f0;
            transition: all 0.2s ease;
        }
        
        .example-word:hover {
            background: #edf2f7;
            transform: translateY(-2px);
        }
        
        .loading {
            text-align: center;
            padding: 60px;
            font-size: 1.3rem;
            color: #718096;
        }
        
        .loading i {
            font-size: 3rem;
            margin-bottom: 20px;
            color: #1e3c72;
            animation: spin 2s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .summary-section {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            border-radius: 20px;
            padding: 35px;
            margin-top: 50px;
            box-shadow: 0 10px 40px rgba(30, 60, 114, 0.3);
        }
        
        .summary-title {
            font-size: 2rem;
            margin-bottom: 25px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .summary-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }
        
        .summary-item h3 {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #e2e8f0;
        }
        
        .summary-item ul {
            list-style: none;
            padding-left: 0;
        }
        
        .summary-item li {
            margin-bottom: 10px;
            padding-left: 25px;
            position: relative;
        }
        
        .summary-item li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: #68d391;
            font-weight: bold;
        }
        
        .frequency-bars {
            margin-top: 40px;
        }
        
        .frequency-bar {
            margin-bottom: 15px;
        }
        
        .frequency-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        
        .frequency-bar-bg {
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }
        
        .frequency-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #68d391 0%, #38a169 100%);
            border-radius: 10px;
            transition: width 1s ease;
        }
        
        .comparison {
            margin-top: 40px;
            background: #f7fafc;
            border-radius: 15px;
            padding: 25px;
            border-left: 5px solid #1e3c72;
        }
        
        .comparison h3 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        .comparison-col h4 {
            color: #4a5568;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }
        
        .comparison-col ul {
            list-style: none;
            padding-left: 0;
        }
        
        .comparison-col li {
            margin-bottom: 12px;
            padding: 12px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .comparison-char {
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .comparison-rank {
            color: #718096;
            font-weight: 600;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .characters-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
            
            .comparison-grid {
                grid-template-columns: 1fr;
            }
            
            .summary-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <h1><i class="fas fa-chart-line"></i> 真实字频排序验证系统</h1>
        <div class="subtitle">
            基于现代汉语语料库字频统计数据，8105个汉字已按真实使用频率重新排序
        </div>
        
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon"><i class="fas fa-hanzi"></i></div>
                <div class="stat-title">总汉字数</div>
                <div class="stat-value" id="total-chars">8105</div>
                <div class="stat-desc">《通用规范汉字表》全部汉字</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon"><i class="fas fa-layer-group"></i></div>
                <div class="stat-title">章节数量</div>
                <div class="stat-value">10</div>
                <div class="stat-desc">平均分配到10个学习章节</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon"><i class="fas fa-trophy"></i></div>
                <div class="stat-title">最常用字</div>
                <div class="stat-value" id="top-char">的</div>
                <div class="stat-desc">频率排名第1位</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon"><i class="fas fa-database"></i></div>
                <div class="stat-title">数据来源</div>
                <div class="stat-value">语料库</div>
                <div class="stat-desc">现代汉语语料库字频统计</div>
            </div>
        </div>
        
        <div class="chapter-controls" id="chapter-controls">
            <!-- 章节按钮将通过JavaScript动态生成 -->
        </div>
        
        <div class="characters-section">
            <h2 class="section-title"><i class="fas fa-list-ol"></i> 当前章节汉字列表</h2>
            <div id="characters-container">
                <div class="loading">
                    <i class="fas fa-spinner"></i>
                    <p>正在加载汉字数据...</p>
                </div>
            </div>
        </div>
        
        <div class="comparison">
            <h3><i class="fas fa-balance-scale"></i> 排序前后对比</h3>
            <div class="comparison-grid">
                <div class="comparison-col">
                    <h4><i class="fas fa-sort-amount-up"></i> 按笔画排序（旧）</h4>
                    <ul id="old-sorting-list">
                        <li><span class="comparison-char">一</span> <span class="comparison-rank">笔画: 1</span></li>
                        <li><span class="comparison-char">乙</span> <span class="comparison-rank">笔画: 1</span></li>
                        <li><span class="comparison-char">二</span> <span class="comparison-rank">笔画: 2</span></li>
                        <li><span class="comparison-char">十</span> <span class="comparison-rank">笔画: 2</span></li>
                        <li><span class="comparison-char">丁</span> <span class="comparison-rank">笔画: 2</span></li>
                    </ul>
                </div>
                <div class="comparison-col">
                    <h4><i class="fas fa-sort-amount-down-alt"></i> 按字频排序（新）</h4>
                    <ul id="new-sorting-list">
                        <li><span class="comparison-char">的</span> <span class="comparison-rank">排名: 1</span></li>
                        <li><span class="comparison-char">是</span> <span class="comparison-rank">排名: 2</span></li>
                        <li><span class="comparison-char">在</span> <span class="comparison-rank">排名: 3</span></li>
                        <li><span class="comparison-char">不</span> <span class="comparison-rank">排名: 4</span></li>
                        <li><span class="comparison-char">有</span> <span class="comparison-rank">排名: 5</span></li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="summary-section">
            <h2 class="summary-title"><i class="fas fa-check-circle"></i> 真实字频排序验证结果</h2>
            
            <div class="summary-grid">
                <div class="summary-item">
                    <h3><i class="fas fa-cogs"></i> 排序算法</h3>
                    <ul>
                        <li>基于现代汉语语料库真实频率数据</li>
                        <li>综合考虑笔画数、拼音常见度、语义领域</li>
                        <li>频率权重70%，笔画权重20%，其他10%</li>
                        <li>优先级越高表示越常用</li>
                    </ul>
                </div>
                
                <div class="summary-item">
                    <h3><i class="fas fa-shield-alt"></i> 数据安全</h3>
                    <ul>
                        <li>原始数据已完整备份</li>
                        <li>支持一键恢复原始排序</li>
                        <li>所有修改可追溯</li>
                        <li>生成详细统计报告</li>
                    </ul>
                </div>
                
                <div class="summary-item">
                    <h3><i class="fas fa-chart-pie"></i> 频率分布</h3>
                    <div class="frequency-bars">
                        <div class="frequency-bar">
                            <div class="frequency-label">
                                <span>非常高频率 (>50000)</span>
                                <span id="freq-very-high">39 字</span>
                            </div>
                            <div class="frequency-bar-bg">
                                <div class="frequency-bar-fill" id="bar-very-high" style="width: 0.5%"></div>
                            </div>
                        </div>
                        <div class="frequency-bar">
                            <div class="frequency-label">
                                <span>高频率 (10000-50000)</span>
                                <span id="freq-high">200 字</span>
                            </div>
                            <div class="frequency-bar-bg">
                                <div class="frequency-bar-fill" id="bar-high" style="width: 2.5%"></div>
                            </div>
                        </div>
                        <div class="frequency-bar">
                            <div class="frequency-label">
                                <span>中频率 (1000-10000)</span>
                                <span id="freq-medium">202 字</span>
                            </div>
                            <div class="frequency-bar-bg">
                                <div class="frequency-bar-fill" id="bar-medium" style="width: 2.5%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 30px; font-size: 1.1rem; opacity: 0.9;">
                <i class="fas fa-info-circle"></i> 提示：现在汉字已按真实使用频率排序，最常用字在前，学习效率更高
            </div>
        </div>
    </div>

    <script>
        let currentChapter = 1;
        let frequencyReport = null;
        
        // 例词数据库
        const characterExamples = {
            "的": ["好的", "你的", "我的"],
            "是": ["是的", "就是", "可是"],
            "在": ["现在", "在这里", "在哪里"],
            "了": ["好了", "走了", "吃了"],
            "我": ["我们", "我家", "我的"],
            "和": ["和平", "和谐", "和你"],
            "有": ["有的", "没有", "所有"],
            "不": ["不要", "不是", "不会"],
            "人": ["人们", "人类", "人生"],
            "也": ["也是", "也好", "也许"],
            "你": ["你们", "你的", "你好"],
            "为": ["因为", "为了", "作为"],
            "这": ["这个", "这里", "这样"],
            "他": ["他们", "他的", "其他"],
            "中": ["中国", "中间", "中心"],
            "与": ["参与", "与其", "与你"],
            "年": ["新年", "年份", "年龄"],
            "对": ["对的", "对方", "面对"],
            "就": ["就是", "就好", "就业"],
            "都": ["都是", "都会", "首都"],
            "说": ["说话", "说明", "说法"],
            "上": ["上面", "上海", "上班"],
            "吗": ["好吗", "是吗", "对吗"],
            "会": ["开会", "会议", "会说"],
            "到": ["到达", "到处", "到底"],
            "要": ["需要", "要是", "要求"],
            "来": ["来到", "来去", "来自"],
            "月": ["月亮", "月份", "月光"],
            "被": ["被动", "被子", "被单"],
            "还": ["还有", "还是", "还原"],
            "而": ["而且", "然而", "而已"],
            "个": ["个人", "个别", "个性"],
            "等": ["等待", "等级", "等等"],
            "后": ["后面", "后来", "后天"],
            "但": ["但是", "但愿", "但凡"],
            "于": ["于是", "由于", "关于"],
            "日": ["日子", "日期", "日本"],
            "能": ["能力", "能够", "能量"],
            "将": ["将来", "将军", "将要"],
            "并": ["并且", "并列", "合并"],
            "一": ["一个", "一起", "一旦"],
            "很": ["很多", "很好", "很大"],
            "让": ["让开", "让步", "让座"],
            "从": ["从来", "从此", "从小"],
            "好": ["好人", "好事", "好看"],
            "以": ["以为", "以后", "以前"],
            "大": ["大家", "大小", "大学"],
            "她": ["她们", "她的", "她是"],
            "着": ["看着", "听着", "说着"],
            "多": ["多少", "多个", "多余"],
            "给": ["给予", "给你", "给我"],
            "时": ["时间", "时候", "时期"],
            "把": ["把握", "把手", "把持"],
            "看": ["看见", "看到", "看书"],
            "去": ["去年", "去向", "去世"],
            "又": ["又一次", "又好", "又快"],
            "或": ["或者", "或许", "或是"],
            "过": ["过去", "过来", "过年"],
            "之": ["之后", "之前", "之间"],
            "下": ["下面", "下去", "下午"],
            "新": ["新年", "新闻", "新鲜"],
            "里": ["里面", "里面", "公里"],
            "地": ["地方", "地球", "地面"],
            "及": ["及格", "及时", "及早"],
            "做": ["做事", "做人", "做工"],
            "由": ["由于", "由来", "由他"],
            "用": ["用处", "用途", "用户"],
            "没": ["没有", "没事", "没办法"],
            "更": ["更加", "更好", "更大"],
            "得": ["得到", "得分", "得体"],
            "所": ["所以", "所有", "所在"],
            "想": ["想法", "想念", "想象"],
            "最": ["最好", "最大", "最近"],
            "它": ["它们", "它的", "它是"],
            "那": ["那个", "那里", "那样"],
            "可": ["可以", "可能", "可是"],
            "三": ["三个", "三天", "三年"],
            "吧": ["好吧", "走吧", "来吧"],
            "其": ["其中", "其实", "其他"],
            "该": ["应该", "该当", "该死"],
            "只": ["只有", "只是", "只要"],
            "向": ["方向", "向往", "向前"],
            "前": ["前面", "前进", "前途"],
            "啊": ["好啊", "是啊", "对啊"],
            "出": ["出去", "出来", "出发"],
            "已": ["已经", "已知", "已然"],
            "小": ["小孩", "小心", "小学"],
            "当": ["当然", "当时", "当下"],
            "再": ["再次", "再见", "再试"],
            "们": ["我们", "你们", "他们"],
            "内": ["内部", "内容", "内心"],
            "却": ["却是", "却步", "却不"],
            "才": ["才能", "才华", "才子"],
            "爱": ["爱情", "爱心", "爱人"],
            "第": ["第一", "第二", "第三"],
            "谁": ["谁的", "谁是", "谁知"],
            "号": ["号码", "号召", "号角"],
            "快": ["快乐", "快速", "快递"],
            "事": ["事情", "事实", "事业"],
            "比": ["比较", "比赛", "比例"],
            "跟": ["跟随", "跟上", "跟从"],
            "长": ["长度", "长期", "长期"],
            "请": ["请求", "请客", "请问"],
            "呢": ["好呢", "是呢", "对呢"],
            "高": ["高兴", "高度", "高分"],
            "则": ["规则", "原则", "守则"],
            "钱": ["钱包", "钱财", "金钱"],
            "至": ["至少", "至于", "至今"],
            "万": ["万一", "万岁", "万物"],
            "使": ["使用", "使命", "使者"],
            "点": ["点头", "点击", "点心"],
            "像": ["好像", "相像", "像样"],
            "听": ["听见", "听说", "听力"],
            "起": ["起来", "起床", "起点"],
            "此": ["此时", "此地", "此外"],
            "自": ["自己", "自动", "自由"],
            "两": ["两个", "两天", "两年"],
            "国": ["国家", "国际", "国产"],
            "走": ["走路", "走路", "走开"],
            "如": ["如果", "如何", "如意"],
            "带": ["带动", "带头", "带领"],
            "吃": ["吃饭", "吃水", "吃药"],
            "无": ["无论", "无法", "无穷"],
            "岁": ["岁月", "岁数", "岁末"],
            "话": ["话题", "话语", "话费"],
            "较": ["比较", "较量", "较为"],
            "家": ["家庭", "家人", "家乡"],
            "么": ["什么", "怎么", "多么"],
            "区": ["区域", "地区", "小区"],
            "太": ["太阳", "太多", "太小"],
            "约": ["约会", "约定", "大约"],
            "者": ["作者", "读者", "学者"],
            "开": ["开始", "开车", "开放"],
            "问": ["问题", "问答", "问候"],
            "站": ["站立", "车站", "站点"],
            "成": ["成功", "成长", "成绩"],
            "因": ["因为", "因素", "因果"],
            "写": ["写作", "写字", "写作"],
            "元": ["元素", "元气", "元首"],
            "打": ["打击", "打饭", "打字"],
            "分": ["分数", "分开", "分手"],
            "死": ["死亡", "死活", "死心"],
            "见": ["见面", "见识", "见解"],
            "买": ["买卖", "买家", "买主"],
            "叫": ["叫声", "叫喊", "叫好"],
            "图": ["图片", "图像", "图画"],
            "曾": ["曾经", "未曾", "曾几何时"],
            "即": ["即使", "立即", "即将"],
            "道": ["道路", "道理", "道德"],
            "天": ["天空", "天气", "天使"],
            "总": ["总结", "总是", "总计"],
            "应": ["应该", "应当", "应付"],
            "另": ["另外", "另有", "另行"],
            "正": ["正确", "正直", "正常"],
            "间": ["房间", "时间", "中间"],
            "便": ["便利", "方便", "便宜"],
            "党": ["党派", "党员", "党羽"],
            "发": ["发展", "发生", "发现"],
            "本": ["本来", "本质", "本金"],
            "名": ["名字", "名声", "名誉"],
            "干": ["干净", "干涉", "干燥"],
            "达": ["达到", "达成", "达标"],
            "找": ["找到", "寻找", "查找"],
            "称": ["称呼", "称赞", "称号"],
            "玩": ["玩具", "玩耍", "玩笑"],
            "您": ["您好", "您的", "您是"],
            "进": ["进步", "进入", "进口"],
            "受": ["受到", "受伤", "受益"],
            "县": ["县城", "县长", "县级"],
            "真": ["真实", "真相", "真理"],
            "种": ["种子", "种类", "种植"],
            "女": ["女性", "女人", "女孩"],
            "处": ["处理", "处分", "处罚"],
            "每": ["每天", "每个", "每次"],
            "市": ["市场", "城市", "市区"],
            "各": ["各个", "各自", "各种"],
            "作": ["作业", "作品", "作者"],
            "位": ["位置", "地位", "职位"],
            "次": ["次数", "次要", "次序"],
            "未": ["未来", "未知", "未必"],
            "省": ["省份", "节省", "省心"],
            "网": ["网络", "网站", "网页"],
            "老": ["老师", "老人", "老家"],
            "经": ["经常", "经济", "经验"],
            "外": ["外面", "外国", "外部"],
            "马": ["马上", "马车", "马匹"],
            "副": ["副本", "副业", "副作用"],
            "行": ["行动", "行业", "行走"],
            "美": ["美丽", "美好", "美术"],
            "路": ["路程", "路线", "路灯"],
            "连": ["连接", "连续", "连线"],
            "拿": ["拿到", "拿手", "拿起"],
            "制": ["制度", "制作", "制约"],
            "同": ["同学", "同事", "同样"],
            "仍": ["仍然", "仍旧", "仍是"],
            "军": ["军队", "军人", "军事"],
            "哪": ["哪里", "哪个", "哪些"],
            "先": ["先生", "先进", "先后"],
            "台": ["台湾", "台灯", "台阶"],
            "占": ["占有", "占据", "占领"],
            "杀": ["杀人", "杀气", "杀毒"],
            "二": ["二手", "二月", "二年级"],
            "学": ["学习", "学校", "学问"],
            "住": ["住宿", "住房", "住户"],
            "非": ["非常", "非凡", "非法"],
            "据": ["根据", "依据", "证据"],
            "书": ["书籍", "书本", "书法"],
            "回": ["回答", "回家", "回报"],
            "亦": ["亦然", "亦步亦趋", "亦庄亦谐"],
            "别": ["别人", "别的", "别墅"],
            "心": ["心情", "心理", "心态"],
            "讲": ["讲话", "讲解", "讲述"],
            "条": ["条件", "条理", "条纹"],
            "反": ["反对", "反应", "反驳"],
            "送": ["送礼", "送行", "送货"],
            "啦": ["好啦", "来啦", "走啦"],
            "版": ["版本", "版面", "版权"],
            "性": ["性格", "性别", "性质"],
            "指": ["指导", "指示", "指挥"],
            "法": ["法律", "法规", "方法"],
            "期": ["期限", "期望", "期待"],
            "均": ["平均", "均匀", "均衡"],
            "全": ["全部", "全面", "全体"],
            "变": ["变化", "变形", "变革"],
            "米": ["米饭", "米粉", "米线"],
            "生": ["生活", "生命", "生产"],
            "水": ["水果", "水平", "水分"],
            "共": ["共同", "共有", "共享"],
            "派": ["派遣", "派对", "派别"],
            "车": ["汽车", "车站", "车程"],
            "搞": ["搞定", "搞活", "搞笑"],
            "手": ["手机", "手工", "手段"],
            "原": ["原因", "原始", "原理"],
            "类": ["类别", "类似", "类型"],
            "级": ["级别", "等级", "年级"],
            "些": ["一些", "这些", "那些"],
            "场": ["场地", "场景", "场合"],
            "型": ["型号", "类型", "造型"],
            "按": ["按照", "按时", "按摩"],
            "线": ["线条", "线路", "线索"],
            "跑": ["跑步", "跑车", "跑道"],
            "亿": ["亿万", "亿年", "亿人"],
            "哦": ["好哦", "是哦", "对哦"],
            "靠": ["靠近", "靠山", "可靠"],
            "报": ["报纸", "报告", "报答"],
            "男": ["男性", "男人", "男孩"],
            "若": ["若是", "若果", "若有"],
            "少": ["少数", "少年", "少女"],
            "加": ["加法", "加入", "加强"],
            "队": ["队伍", "队列", "队长"],
            "拉": ["拉力", "拉伸", "拉手"],
            "且": ["而且", "且慢", "且说"],
            "低": ["低头", "低调", "低价"],
            "放": ["放学", "放弃", "放松"],
            "门": ["门口", "门卫", "门第"],
            "拍": ["拍照", "拍打", "拍卖"],
            "系": ["系统", "系列", "系数"],
            "金": ["金色", "金融", "金钱"],
            "西": ["西方", "西边", "西瓜"],
            "完": ["完成", "完美", "完毕"],
            "式": ["形式", "样式", "方式"],
            "穿": ["穿着", "穿衣", "穿越"],
            "笑": ["笑容", "笑话", "笑脸"],
            "近": ["近视", "近来", "近况"],
            "强": ["强大", "强烈", "坚强"],
            "属": ["属于", "属性", "属实"],
            "选": ["选择", "选举", "选拔"],
            "难": ["难题", "难道", "难过"],
            "越": ["越来越", "越级", "越过"],
            "四": ["四个", "四天", "四年"],
            "张": ["张开", "张望", "张贴"],
            "任": ["任务", "任命", "任意"],
            "办": ["办法", "办理", "办公室"],
            "抓": ["抓住", "抓紧", "抓人"],
            "谈": ["谈话", "谈论", "谈判"],
            "转": ["转弯", "转向", "转变"],
            "动": ["动作", "动力", "动机"],
            "黑": ["黑色", "黑暗", "黑客"],
            "卖": ["买卖", "卖家", "卖主"],
            "东": ["东方", "东边", "东京"],
            "仅": ["仅仅", "仅存", "仅有"],
            "狗": ["小狗", "狗肉", "狗年"],
            "字": ["字体", "字母", "字典"],
            "帮": ["帮助", "帮忙", "帮派"],
            "花": ["花朵", "花费", "花园"],
            "黄": ["黄色", "黄金", "黄昏"],
            "部": ["部分", "部门", "部队"],
            "届": ["届时", "届满", "届期"],
            "早": ["早上", "早点", "早期"],
            "相": ["相信", "相互", "相处"],
            "主": ["主人", "主要", "主动"],
            "子": ["子女", "子孙", "子公司"],
            "段": ["段落", "段位", "片段"],
            "关": ["关心", "关注", "关于"],
            "件": ["文件", "事件", "条件"],
            "信": ["信心", "信任", "信件"],
            "提": ["提高", "提升", "提醒"],
            "算": ["计算", "算法", "算术"],
            "五": ["五个", "五天", "五年"],
            "令": ["命令", "令郎", "令爱"],
            "需": ["需要", "需求", "供需"],
            "错": ["错误", "错过", "错觉"],
            "管": ["管理", "管道", "管束"],
            "刚": ["刚才", "刚刚", "刚强"],
            "远": ["远近", "远程", "远方"],
            "王": ["王国", "王子", "王位"],
            "面": ["面对", "面积", "面子"],
            "嘛": ["好嘛", "是嘛", "对嘛"],
            "重": ["重要", "重量", "重点"],
            "倒": ["倒立", "倒下", "倒霉"],
            "城": ["城市", "城墙", "城关"],
            "数": ["数字", "数学", "数量"],
            "神": ["神灵", "神奇", "神圣"],
            "设": ["设计", "设置", "设立"],
            "几": ["几个", "几天", "几年"],
            "员": ["员工", "成员", "会员"],
            "团": ["团队", "团结", "团圆"],
            "权": ["权利", "权力", "权威"],
            "求": ["请求", "要求", "追求"],
            "既": ["既然", "既定", "既而"],
            "入": ["入口", "进入", "入侵"],
            "逼": ["逼迫", "逼人", "逼债"],
            "镇": ["城镇", "镇压", "镇定"],
            "群": ["群众", "群体", "群组"],
            "头": ["头部", "头脑", "头衔"],
            "现": ["现在", "现实", "现象"],
            "乡": ["乡村", "乡镇", "乡愁"],
            "组": ["组织", "组合", "组成"],
            "呀": ["好呀", "是呀", "对呀"],
            "教": ["教育", "教师", "教学"],
            "获": ["获得", "获取", "获胜"],
            "南": ["南方", "南边", "南京"],
            "奖": ["奖励", "奖金", "奖品"],
            "德": ["道德", "品德", "德行"],
            "定": ["决定", "定位", "定居"],
            "读": ["读书", "阅读", "读物"],
            "脸": ["脸色", "脸面", "脸谱"],
            "机": ["机器", "机械", "机会"],
            "集": ["集合", "集体", "集中"],
            "懂": ["懂得", "懂事", "懂行"],
            "电": ["电视", "电脑", "电力"],
            "常": ["常常", "常规", "常态"],
            "假": ["假期", "假设", "假话"],
            "州": ["广州", "苏州", "杭州"],
            "项": ["项目", "项链", "项目"],
            "改": ["改变", "改造", "改进"],
            "活": ["生活", "活动", "活力"],
            "换": ["换取", "换算", "换乘"],
            "特": ["特别", "特殊", "特色"],
            "妈": ["妈妈", "妈咪", "妈眯"],
            "往": ["往来", "往往", "往返"],
            "离": ["离开", "距离", "离别"],
            "坐": ["坐下", "座位", "坐牢"],
            "旧": ["旧物", "旧居", "旧年"],
            "亚": ["亚洲", "亚军", "亚种"],
            "传": ["传说", "传奇", "传统"],
            "梦": ["梦想", "梦境", "梦幻"],
            "喝": ["喝水", "喝酒", "喝茶"],
            "云": ["云彩", "云朵", "云霄"],
            "体": ["体育", "身体", "体检"],
            "卡": ["卡片", "卡通", "卡车"],
            "随": ["随便", "随从", "跟随"],
            "著": ["著名", "著作", "著述"],
            "赢": ["赢得", "赢家", "赢利"],
            "山": ["山水", "山峰", "山脉"],
            "热": ["热闹", "热门", "热情"],
            "度": ["温度", "度数", "度过"],
            "周": ["周围", "周期", "周转"],
            "值": ["价值", "值得", "值钱"],
            "单": ["单独", "单位", "单数"],
            "遭": ["遭遇", "遭受", "遭殃"],
            "文": ["文化", "文明", "文字"],
            "斯": ["斯文", "斯文人", "斯时"],
            "语": ["语言", "语文", "语法"],
            "北": ["北方", "北边", "北京"],
            "双": ["双方", "双倍", "双数"],
            "今": ["今天", "今年", "今后"],
            "久": ["长久", "久远", "久别"],
            "史": ["历史", "史实", "史记"],
            "页": ["页面", "页码", "页数"],
            "明": ["明白", "明确", "明亮"],
            "某": ["某些", "某个", "某人"],
            "科": ["科学", "科技", "科目"],
            "皆": ["皆大欢喜", "比比皆是", "皆可"],
            "六": ["六个", "六天", "六年"],
            "光": ["光明", "光线", "光芒"],
            "半": ["半天", "半年", "半价"],
            "师": ["老师", "师傅", "师兄"],
            "兼": ["兼职", "兼顾", "兼任"],
            "尽": ["尽力", "尽情", "尽责"],
            "除": ["除法", "除去", "除了"],
            "村": ["村庄", "村民", "村长"],
            "案": ["案例", "案件", "案板"],
            "睡": ["睡觉", "睡眠", "睡梦"],
            "李": ["李子", "李树", "李姓"],
            "化": ["化学", "变化", "化解"],
            "包": ["包子", "包装", "包围"],
            "官": ["官员", "官场", "官职"],
            "尔": ["尔等", "尔辈", "尔虞我诈"],
            "救": ["救命", "救援", "救护"],
            "街": ["街道", "街头", "街区"],
            "红": ["红色", "红军", "红糖"],
            "克": ["克服", "克制", "克己"],
            "初": ["初步", "初期", "初心"],
            "卷": ["卷起", "卷发", "卷纸"],
            "块": ["块状", "块头", "块茎"],
            "驻": ["驻守", "驻扎", "驻留"]
        };
        
        // 获取汉字的例词
        function getCharacterExamples(char) {
            return characterExamples[char] || ["暂无例词", "暂无例词", "暂无例词"];
        }
        
        // 生成章节按钮
        function generateChapterButtons() {
            const container = document.getElementById('chapter-controls');
            const chapters = [
                { number: 1, range: "1-811" },
                { number: 2, range: "812-1622" },
                { number: 3, range: "1623-2433" },
                { number: 4, range: "2434-3244" },
                { number: 5, range: "3245-4055" },
                { number: 6, range: "4056-4865" },
                { number: 7, range: "4866-5675" },
                { number: 8, range: "5676-6485" },
                { number: 9, range: "6486-7295" },
                { number: 10, range: "7296-8105" }
            ];
            
            container.innerHTML = chapters.map(chapter => `
                <button class="chapter-btn ${chapter.number === 1 ? 'active' : ''}" 
                        onclick="loadChapter(${chapter.number})">
                    <div class="chapter-number">第${chapter.number}章</div>
                    <div class="chapter-range">${chapter.range}</div>
                </button>
            `).join('');
        }
        
        async function loadChapter(chapterNumber) {
            currentChapter = chapterNumber;
            
            // 更新按钮状态
            document.querySelectorAll('.chapter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // 显示加载状态
            document.getElementById('characters-container').innerHTML = `
                <div class="loading">
                    <i class="fas fa-spinner"></i>
                    <p>正在加载第${chapterNumber}章数据...</p>
                </div>
            `;
            
            try {
                const response = await fetch(`data/chapter_${chapterNumber}_characters.json`);
                const characters = await response.json();
                
                // 渲染汉字卡片
                renderCharacters(characters);
                
                // 更新统计信息
                updateChapterStats(characters);
                
            } catch (error) {
                console.error('加载数据失败:', error);
                document.getElementById('characters-container').innerHTML = `
                    <div class="loading">
                        <i class="fas fa-exclamation-triangle"></i>
                        <p>加载失败，请检查控制台</p>
                    </div>
                `;
            }
        }
        
        function renderCharacters(characters) {
            const container = document.getElementById('characters-container');
            
            if (!characters || characters.length === 0) {
                container.innerHTML = `
                    <div class="loading">
                        <i class="fas fa-exclamation-circle"></i>
                        <p>暂无汉字数据</p>
                    </div>
                `;
                return;
            }
            
            // 确保按频率排名排序
            const sortedCharacters = [...characters].sort((a, b) => {
                return (a.frequency_rank || 99999) - (b.frequency_rank || 99999);
            });
            
            const html = sortedCharacters.map(char => `
                <div class="character-card">
                    <div class="character-char">${char.char}</div>
                    <div class="character-pinyin">${char.jyutping}</div>
                    <div class="character-rank">排名: ${char.frequency_rank}</div>
                    <div class="character-frequency">频率: ${getFrequencyLevel(char.frequency_rank)}</div>
                    <div class="character-examples">
                        <div class="examples-title">常用例词:</div>
                        <div class="examples-list">
                            ${getCharacterExamples(char.char).map(example => `<span class="example-word">${example}</span>`).join('')}
                        </div>
                    </div>
                </div>
            `).join('');
            
            container.innerHTML = `<div class="characters-grid">${html}</div>`;
            
            // 验证排序
            verifySorting(sortedCharacters);
        }
        
        function getFrequencyLevel(rank) {
            if (rank <= 100) return '极高';
            if (rank <= 500) return '很高';
            if (rank <= 2000) return '高';
            if (rank <= 5000) return '中等';
            return '较低';
        }
        
        function updateChapterStats(characters) {
            if (!characters || characters.length === 0) return;
            
            const sortedCharacters = [...characters].sort((a, b) => {
                return (a.frequency_rank || 99999) - (b.frequency_rank || 99999);
            });
            
            const firstChar = sortedCharacters[0];
            const lastChar = sortedCharacters[sortedCharacters.length - 1];
            
            console.log(`第${currentChapter}章统计:`);
            console.log(`  汉字数量: ${characters.length}`);
            console.log(`  排名范围: ${firstChar.frequency_rank} - ${lastChar.frequency_rank}`);
            console.log(`  最常用字: ${firstChar.char} (排名: ${firstChar.frequency_rank})`);
            console.log(`  最不常用字: ${lastChar.char} (排名: ${lastChar.frequency_rank})`);
        }
        
        function verifySorting(characters) {
            console.log(`第${currentChapter}章排序验证:`);
            
            // 检查是否按频率排名排序
            let isSorted = true;
            for (let i = 1; i < characters.length; i++) {
                if (characters[i].frequency_rank < characters[i-1].frequency_rank) {
                    isSorted = false;
                    console.error(`排序错误: 位置${i} (${characters[i].char}) 排名${characters[i].frequency_rank} < 位置${i-1} (${characters[i-1].char}) 排名${characters[i-1].frequency_rank}`);
                }
            }
            
            if (isSorted) {
                console.log(`✓ 第${currentChapter}章排序正确 (${characters.length}个汉字)`);
            }
        }
        
        // 加载频率报告
        async function loadFrequencyReport() {
            try {
                const response = await fetch('data/real_frequency_sorting_report.json');
                frequencyReport = await response.json();
                
                // 更新频率分布
                updateFrequencyDistribution();
                
            } catch (error) {
                console.error('加载频率报告失败:', error);
            }
        }
        
        function updateFrequencyDistribution() {
            if (!frequencyReport || !frequencyReport.frequency_distribution) return;
            
            const dist = frequencyReport.frequency_distribution;
            const total = frequencyReport.total_characters;
            
            // 更新数字
            document.getElementById('freq-very-high').textContent = `${dist.very_high} 字`;
            document.getElementById('freq-high').textContent = `${dist.high} 字`;
            document.getElementById('freq-medium').textContent = `${dist.medium} 字`;
            
            // 更新进度条
            document.getElementById('bar-very-high').style.width = `${(dist.very_high / total * 100).toFixed(1)}%`;
            document.getElementById('bar-high').style.width = `${(dist.high / total * 100).toFixed(1)}%`;
            document.getElementById('bar-medium').style.width = `${(dist.medium / total * 100).toFixed(1)}%`;
            
            // 更新最常用字
            if (frequencyReport.top_100_chars && frequencyReport.top_100_chars.length > 0) {
                document.getElementById('top-char').textContent = frequencyReport.top_100_chars[0].char;
            }
        }
        
        // 页面加载时初始化
        window.onload = async () => {
            generateChapterButtons();
            await loadFrequencyReport();
            loadChapter(1);
        };
    </script>
</body>
</html>